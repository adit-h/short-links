# short-links
Small API to shorten any available valid links inside body content of message

Able to support multiple domains:

1. `abc.me` 
2. `def.me`
3. etc

## APIs

1. Create shortner: `POST /api/shorten`

### Payload

```json
API will accept full message content and then convert all available URLs into shorter version.
{
    "message": "Congrats! Click here for your voucher: https://google.com/?param1=test",
    "domain": "abc.me"
}
```

### Response

```json
{
    "code": 200,
    "message": "Shorten completed",
    "result": "Congrats! Click here for your voucher: https://abc.me/jf290jf28"
}
```

## Handling Redirect

1. Controller listen for the hashed ID.
2. Unhash to get the ID and find in DB.
3. Return 301 to the long URL.

### Handling Exceptions

1. Show default 404.

## Example

If string `https://google.com/?param1=ali&param2=john` already exist in `url` column, use back the same `shorten` value

### Tables

#### `hash_url` table

| id (PK) | url | hash | domainId | expiry (nullable) |
|---------|-----|------|----------|-------------------|
| 1 | https://google.com/?param1=ali&param2=john | jf290jf28 | 1 | 2023-03-22T14:22:05Z |

Where `jf290jf28` is generated by hashing id (PK) with  https://www.npmjs.com/package/hashids

Expiry: future feature

#### `domain` table

| id (PK) | domain | createdOn |
|---------|--------|-----------|
| 1 | abc.me | 2023-03-22T14:22:05Z |
